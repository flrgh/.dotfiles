#!/usr/bin/env bash


set -eu

ihave() {
    local cmd=$1
    command -v "$cmd" &>/dev/null
}

if ihave rpm; then
    rpm -qa \
    | sed -r \
        -e 's/\.noarch$//' \
        -e 's/\.x86_64//' \
        -e 's/\.i686//' \
        -e 's/\.fc[0-9]{2}//' \
        -e 's/-[0-9.-]+$//'
elif ihave dpkg; then
    dpkg -l
else
    echo "no rpm or dpkg present--what do I do?"
    exit 1
fi
